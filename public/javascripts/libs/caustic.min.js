-function(){var a=[].slice;b=function b(){this.callbacks={}},b.prototype.on=function(a,b){(this.callbacks[a]=this.callbacks[a]||[]).push(b);return this},b.prototype.emit=function(b){var c=a.call(arguments,1),d=this.callbacks[b];if(d)for(var e=0,f=d.length;e<f;++e)d[e].apply(this,c);return this}}(),-function(){function c(a){return a.split(/[-\[\]]/).map(function(a,b){return b&&a[0]?a[0].toUpperCase()+a.slice(1):a}).join("")}function b(a,b){return"string"==typeof a?function(){return b[a]()}:a}function a(a){return"string"==typeof a?function(b){return b[a]()}:a}d=function d(a){if(!(this instanceof d))return new d(a);EventEmitter.call(this);var b,c=this;a instanceof jQuery?b=a:~a.indexOf("<")?b=a:b=$("#"+a+"-template").html(),this.el=$(b),this.el.each(function(a,b){c.visit($(b))})},d.prototype.__proto__=EventEmitter.prototype,d.prototype.visit=function(a,b){var d=this,e=a.get(0).nodeName,f=(a.attr("class")||"").split(/ +/),g="visit"+e,h=c(f[0]);this[g]&&!b&&this[g](a,h),a.children().each(function(a,b){d.visit($(b))})},d.prototype.visitTABLE=function(a,b){this[b]=a,this[b].add=function(a){this.append(a.el||a)}},d.prototype.visitINPUT=function(a,b){var c=this,d=a.attr("type"),b=a.attr("name")||b,e=b.replace(/\]/g,"").split("["),f=this;e.slice(0,-1).forEach(function(a){""!=a&&(f=f[a]=f[a]||{})}),b=e[e.length-1];switch(d){case"text":case"password":f[b]=function(b){if(0==arguments.length)return a.val();a.val(b);return c},f[b].placeholder=function(b){a.attr("placeholder",b);return this},f[b].isEmpty=function(){return""==$.trim(a.val())},f[b].clear=function(){a.val("");return c};break;case"checkbox":f[b]=function(b){if(0==arguments.length)return a.attr("checked");switch(typeof b){case"function":a.change(function(d){b.call(c,a.attr("checked"),d)});break;default:a.attr("checked",b?"checked":b)}return c};break;case"button":case"submit":this.visitA(a,b)}},d.prototype.visitCANVAS=function(a,b){this[b]=a.get(0)},d.prototype.visitFORM=function(a,b){var c=this,b=b||"form";this[b]=a,this[b].values=function(){return a.serializeArray()},this[b].values.toString=function(){return a.serialize()},this[b].object=function(){var b=a.serializeArray(),c={};b.forEach(function(a){var b=a.name.replace(/\]/g,"").split("["),d=b[b.length-1],e=c;b.slice(0,-1).forEach(function(a){""!=a&&(e=e[a]=e[a]||{})}),e[d]=a.value});return c},this[b].object.toString=function(){return JSON.stringify(c[b].object())},this[b].action=a.attr("action"),this[b].method=a.attr("method"),this[b].enctype=a.attr("enctype"),this.submit=function(b){switch(typeof b){case"function":a.submit(function(d){b.call(c,d,a);return!1});break;default:a.submit()}return this},this.submit.json=function(a){this(function(){$.ajax({type:c.form.method.toUpperCase(),url:c.form.action,data:c.form.object.toString(),headers:{"Content-Type":"application/json"}}).complete(a)})}},d.prototype.visitIMG=function(a,b){var c=this;this[b]=function(b){if(0==arguments.length)return a.attr("src");switch(typeof b){case"function":a.click(function(d){b.call(c,d,a)});break;default:a.attr("src",b)}return this}},d.prototype.visitA=d.prototype.visitBUTTON=function(a,c){var d=this;a.click(function(b){d.emit(c,b,a)}),this[c]=function(c){c?(c=b(c,this),a.click(function(b){c.call(d,b,a);return!1})):a.click();return this}},d.prototype.visitP=d.prototype.visitTD=d.prototype.visitSPAN=d.prototype.visitDIV=function(a,b){var c=this;this[b]=function(b){if(0==arguments.length)return a;a.empty().append(b.el||b);return this},this[b].text=function(b){return a.text(b)}},d.prototype.visitOL=d.prototype.visitUL=function(b,c){var d=this;this.children=[],this[c]=b,b.add=function(a){var c=$("<li>");d.children.push(a),b.append(c.append(a.el||a));return this},b.items=this.children,b.each=function(a){for(var b=0,c=d.children.length;b<c;++b)a(d.children[b],b);return this},b.map=function(b){var c=[],b=a(b);for(var e=0,f=d.children.length;e<f;++e)c.push(b(d.children[e],e));return c}},d.prototype.visitH1=d.prototype.visitH2=d.prototype.visitH3=d.prototype.visitH4=d.prototype.visitH5=function(a,b){var c=this;this[b]=function(b){if(0==arguments.length)return a.text();a.text(b.el||b);return this}},d.prototype.remove=function(){var a=this.el.parent(),b=a.get(0).nodeName;"LI"==b?a.remove():this.el.remove(),this.emit("remove");return this},d.prototype.addTo=function(a){if(!a.add)throw new Error(".addTo() requires a list");a.add(this);return this},d.prototype.replace=function(a){$(a.el||a).children().replaceWith(this.el);return this},d.prototype.hide=function(){this.el.hide(),this.emit("hide");return this},d.prototype.show=function(){this.el.show(),this.emit("show");return this},d.prototype.center=function(a){var b=this,c=this.el,a=$(a||window),d=a.width(),e=a.height();if(!this._resize){$(a).resize(function(){b.center()});function f(){b._resize=!1,$(a).unbind("resize")}this.on("hide",f).on("remove",f),this._resize=!0}c.css({top:e/2-c.height()/2,left:d/2-c.width()/2});return this},d.prototype.prependTo=function(a){this.el.prependTo(a.el||a);return this},d.prototype.appendTo=function(a){this.el.appendTo(a.el||a);return this}}()